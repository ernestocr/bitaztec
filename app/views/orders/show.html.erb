<p class="alert alert-info">Estado: <b><%= @order.status %></b></p>

<h3>Ficha de depósito</h3>

<div class="row">
  
  <div class="col">
    <p>
      <strong>Pedido creado el:</strong>
      <%= @order.created_at_formatted %>
    </p>

    <p>
      <strong>Cantidad:</strong>
      <%= @order.amount %>
    </p>

    <p>
      <strong>Precio:</strong>
      <%= @order.price %>
    </p>

    <p>
      <strong>Se expira el:</strong>
      <%= @order.expires_at_formatted %>
    </p>

    <p>
      <strong>Método de pago:</strong>
      <%= @order.payment_method.name %>
    </p>

    <p>
      <strong>Instrucciones:</strong>
      <br><%= @order.payment_method.instructions %>
    </p>

    <% if !@order.submitted and !@order.expired %>
      <div class="ui divider"></div>
      
      <h5 class="lead">Sube to recibo para comprobar el pago:</h5>
      <p><button>Subir imágenes</button></p>

      <%= link_to 'Pago completo',
        order_path(@order, order: { submitted: true }), 
        method: :patch, 
        class: 'ui small green button' %>

      <div class="ui divider"></div>

      <%= link_to 'Quieres cancelar?', '#', html: { confirm: 'Estás seguro?' } %>

    <% elsif @order.completed %>

      <p class="alert alert-success">
      Gracias por comprar con <b>BitAztec</b>. En cualquier momento te llegarán tus bitcoins. Puedes verficar la transacción aqui: <%= link_to 'Blockchain.info', "https://blockchain.info/address/#{@order.address}", target: '_blank' %>
      </p>

    <% elsif !@order.expired %>

      <p class="alert alert-warning">
        Gracias por comprar con <b>BitAztec</b>. Tu pago está en proceso de revisión.
      </p>
    <% else %>

      <p class="alert alert-danger">
        Esta orden se expiró. Puedes hacer otra haciendo click <%= link_to 'aqui', new_order_path %>.
      </p>
    <% end %>   
  </div>

  <div class="col">
    <%= render 'shared/message_feed' %>
  </div>
</div>
